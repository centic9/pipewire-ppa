From: Sergio Costas Rodriguez <sergio.costas@canonical.com>
Date: Wed, 22 Nov 2023 13:26:23 +0100
Subject: Move context variable definition inside block

(cherry picked from commit 67b9e9c4e8354a5f2075e41fa0d63f0b9b82d96a)
Origin: upstream, >= 1.1.0 (unreleased)
Forwarded: https://gitlab.freedesktop.org/pipewire/pipewire/-/merge_requests/1779
---
 src/modules/module-protocol-pulse/snap-policy.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

--- a/src/modules/module-protocol-pulse/snap-policy.c
+++ b/src/modules/module-protocol-pulse/snap-policy.c
@@ -49,7 +49,6 @@
     gchar *separator = NULL;
     g_autofree gchar *aacon = NULL;
     gchar *aamode = NULL;
-    const char *context = NULL;
     g_autoptr(SnapdClient) snapdclient = NULL;
     g_autoptr(GPtrArray) plugs = NULL;
     gboolean retv;
@@ -111,7 +110,7 @@
         snapd_client_set_socket_path (snapdclient, "/run/snapd-snap.socket");
 
         /* Take context from the environment if available */
-        context = g_getenv ("SNAP_COOKIE");
+        const char *context = g_getenv ("SNAP_COOKIE");
         if (!context)
             context = "";
 
