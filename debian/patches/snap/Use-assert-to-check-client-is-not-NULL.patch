From: Sergio Costas Rodriguez <sergio.costas@canonical.com>
Date: Wed, 22 Nov 2023 13:03:06 +0100
Subject: Use assert to check client is not NULL

(cherry picked from commit b054bc25910713df63a1321bc86fe15432821800)
Origin: upstream, >= 1.1.0 (unreleased)
Forwarded: https://gitlab.freedesktop.org/pipewire/pipewire/-/merge_requests/1779
---
 src/modules/module-protocol-pulse/snap-policy.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

--- a/src/modules/module-protocol-pulse/snap-policy.c
+++ b/src/modules/module-protocol-pulse/snap-policy.c
@@ -16,6 +16,7 @@
 #include <errno.h>
 #include "snap-policy.h"
 #include <fcntl.h>
+#include <assert.h>
 
 #define SNAP_LABEL_PREFIX      "snap."
 
@@ -61,10 +62,7 @@
     int exit_code;
 
     *app_id = g_strdup("unknown");
-    if (client == NULL) {
-        pw_log_warn("Called snap_get_audio_permissions with NULL parameter.");
-        return PW_SANDBOX_ACCESS_NONE;
-    }
+    assert(client != NULL);
 
     if (aa_getpeercon(fd, &aa_label, &snap_confinement) == -1) {
         if (errno == EINVAL) {
