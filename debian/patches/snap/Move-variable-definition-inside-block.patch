From: Sergio Costas Rodriguez <sergio.costas@canonical.com>
Date: Wed, 22 Nov 2023 13:24:26 +0100
Subject: Move variable definition inside block

(cherry picked from commit 18d0e2e850d74c014c6c27d22c736ec40ac9a873)
Origin: upstream, >= 1.1.0 (unreleased)
Forwarded: https://gitlab.freedesktop.org/pipewire/pipewire/-/merge_requests/1779
---
 src/modules/module-protocol-pulse/snap-policy.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

--- a/src/modules/module-protocol-pulse/snap-policy.c
+++ b/src/modules/module-protocol-pulse/snap-policy.c
@@ -56,8 +56,6 @@
     pw_sandbox_access_t permissions = PW_SANDBOX_ACCESS_NONE;
     pw_sandbox_access_t add_permission = PW_SANDBOX_ACCESS_NONE;
     SnapdPlug **plug = NULL;
-    GPtrArray *slots = NULL;
-    SnapdSlotRef **slot = NULL;
     g_autoptr(GError) error = NULL;
     int exit_code;
 
@@ -174,10 +172,10 @@
         } else {
             continue;
         }
-        slots = snapd_plug_get_connected_slots(*plug);
+        GPtrArray *slots = snapd_plug_get_connected_slots(*plug);
         if (slots == NULL)
             continue;
-        slot = (SnapdSlotRef**) slots->pdata;
+        SnapdSlotRef **slot = (SnapdSlotRef**) slots->pdata;
 
         for (guint q = 0; q < slots->len; q++, slot++) {
             const gchar *slot_name = snapd_slot_ref_get_slot (*slot);
